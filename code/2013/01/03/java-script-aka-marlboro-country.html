<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="twitter:card" content="summary" /><title>JavaScript (aka Marlboro Country) | ЛУДДИТЫ, INC.</title>
<meta name="description" content="Sometimes JavaScript land just feels like Marlboro Country The sales pitch certainly feels similar...">

<!-- SEO and meta information for twitter/whatsupp cards --><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>JavaScript (aka Marlboro Country) | ЛУДДИТЫ, INC.</title>
<meta name="generator" content="Jekyll v4.0.1" />
<meta property="og:title" content="JavaScript (aka Marlboro Country)" />
<meta name="author" content="CF" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Sometimes JavaScript land just feels like Marlboro Country The sales pitch certainly feels similar…" />
<meta property="og:description" content="Sometimes JavaScript land just feels like Marlboro Country The sales pitch certainly feels similar…" />
<link rel="canonical" href="https://luddites.me/code/2013/01/03/java-script-aka-marlboro-country.html" />
<meta property="og:url" content="https://luddites.me/code/2013/01/03/java-script-aka-marlboro-country.html" />
<meta property="og:site_name" content="ЛУДДИТЫ, INC." />
<meta property="og:image" content="https://luddites.me/images/2013-01-03-java-script-aka-marlboro-country.jpg" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-01-03T00:00:00-06:00" />
<script type="application/ld+json">
{"author":{"@type":"Person","name":"CF"},"datePublished":"2013-01-03T00:00:00-06:00","headline":"JavaScript (aka Marlboro Country)","mainEntityOfPage":{"@type":"WebPage","@id":"https://luddites.me/code/2013/01/03/java-script-aka-marlboro-country.html"},"image":"https://luddites.me/images/2013-01-03-java-script-aka-marlboro-country.jpg","description":"Sometimes JavaScript land just feels like Marlboro Country The sales pitch certainly feels similar…","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://luddites.me/images/logo.png"},"name":"CF"},"@type":"BlogPosting","url":"https://luddites.me/code/2013/01/03/java-script-aka-marlboro-country.html","dateModified":"2013-01-03T00:00:00-06:00","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<!-- Feed --><link type="application/atom+xml" rel="alternate" href="https://luddites.me/atom.xml" title="ЛУДДИТЫ, INC." /><!-- CSS --><link rel="shortcut icon" type="image/x-icon" href="/images/favicon.ico"><link href="https://unpkg.com/@primer/css/dist/primer.css" rel="stylesheet" />
<link rel="stylesheet" href="https://luddites.me/assets/css/main.css" />
<noscript><link rel="stylesheet" href="https://luddites.me/assets/css/noscript.css" /></noscript>
<link rel="stylesheet" href="https://luddites.me/assets/stylesheets/main.css" />
<link rel="stylesheet" href="https://luddites.me/assets/css/academicons.min.css"/>

<!-- Analytics --><!-- the google_analytics_id gets auto inserted from the config file -->



<script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga');ga('create','G-WZTYEG3VZJ','auto');ga('require','displayfeatures');ga('send','pageview');</script>

<!-- Math -->


  </head>
  <body class="is-loading">

    <!-- Wrapper -->
      <div id="wrapper" class="fade-in">

        <!-- Header -->
        <header id="header">
          <a href="https://luddites.me/" class="logo">ЛУДДИТЫ, INC.</a>
        </header>

        <!-- Nav -->
          <nav id="nav">

            <ul class="links">
  <li class=""><a href="https://luddites.me/">Home</a></li>
  <li class=""><a href="https://luddites.me/blog/">Blog</a></li>
  <li class=""><a href="https://luddites.me/tags/">Tags</a></li>
  <li class=""><a href="https://luddites.me/categories/">Categories</a></li>
  <li class=""><a href="https://luddites.me/about/">About me</a></li>
</ul>

<ul class="icons">
  <li class=""><a href="https://luddites.me/search" class="icon fa-search"><span class="label">Search</span></a></li>
  <li><a href="https://github.com/crfroehlich" class="icon fa-github" rel="nofollow"><span class="label">GitHub</span></a></li>
  <li><a href="https://twitter.com/tquestingbeast" class="icon fa-twitter" rel="nofollow"><span class="label">Twitter</span></a></li>
  <li>
    
      <a href="/atom.xml" title="Atom Feed" class="icon fa-rss">
        <span class="label">Subscribe</span>
      </a>
    
  </li>
</ul>


          </nav>

        <!-- Main -->
        <div id="main">

          <!-- Post -->
          <section class="post">
            
            <p><article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">JavaScript (aka Marlboro Country)</h1><p class="page-description">Sometimes JavaScript land just feels like Marlboro Country The sales pitch certainly feels similar...</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2013-01-03T00:00:00-06:00" itemprop="datePublished">
        Jan 3, 2013
      </time>• 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">CF</span></span>• 



<span class="read-time" title="Estimated read time">

  4 min read

</span>

    </p>

    
      <p class="category-tags"><i class="fa fa-folder category-tags-icon"></i></i>
      
        <a class="category-tags-link" href="//categories/#code">code</a>
        
      
      </p>
    

    

    </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul class="section-nav">
</ul><p>Sometimes JavaScript land just feels like Marlboro Country. The sales pitch certainly feels similar:</p>

<p><img src="https://github.com/crfroehlich/cdn/raw/main/images/marlboro_country_horse_rider.jpg" alt="marlboro country horse rider"></p>

<p><em>Come to the hottest part of the United States. It’s popular. It’s everywhere. It’s the future. Now: cover yourself in leather. Don’t ask why. It’s part of the feature set. Next: the temperature is 120 degrees, and you need to start a fire. It’s not supposed to make sense, that’s the point. You’ll need to do this at noon every day. After about 10 days, you’ll find yourself assaulting anyone _not_ starting noonday fires.</em>  <br>
<img src="https://github.com/crfroehlich/cdn/raw/main/images/marlboro_man.jpg" alt="marlboro man">  <br>
<em>C’mon?! What’s the worst that could happen?</em>  <br>
<em>Imagine: right now, you could be riding across a brush fire.. or maybe it’s a dust storm.. or maybe.. who knows? Everything’s mutable! Ride across anything you want. Of course, you are limited to desert colors (obviously).</em></p>

<p>Lest you be confused, I love JavaScript. While the language as <a href="http://www.ecma-international.org/ecma-262/5.1/">specified</a> is littered with nightmarish design flaws and obstacles reminiscent of trench warfare and carpet bombing (let’s call them <a href="https://www.destroyallsoftware.com/talks/wat">WATs</a>), JavaScript’s Good Parts are so good you might be forgiven for forgetting about that elephant in the bathroom (aka IE). Yet.</p>

<p>Yet and yet, the WATs <a href="http://www.workpump.com/bugcount/bugcount.html">do also rise</a>. And they rise.</p>

<p>A few weeks ago, I began to set ink to digital paper to record the recipe for my new found <a href="http://www.urbandictionary.com/define.php?term=wat&amp;defid=3322419">WAT</a>. There is a delightful tool for recording code demonstrations, <a href="http://thecodeplayer.com/">The Code Player</a>. While the demos presented are quite nice, I lost all 5 of my first drafts to bugs in the system. Still, you should keep an eye on it. I considered reverting to my old faithful, <a href="http://jsfiddle.net/">JSFiddle</a>, which is fantastic for mocking up and testing code but less suited for driving a walk through. In the end, syntax highlighting in the blog will have to must suffice.</p>

<p>The municipal “we” begin with a simple function:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="nx">aThing</span><span class="p">)</span> <span class="p">{</span>    
  <span class="nx">console</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="nx">aThing</span><span class="p">);</span>    
    
  <span class="c1">//In theory, if(aThing) should be equivalent to if(true == aThing)    </span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">aThing</span><span class="p">)</span> <span class="p">{</span>    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Verbing on </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span><span class="p">);</span>    
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Not verbing on </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span><span class="p">);</span>    
  <span class="p">}</span>    
  <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">(</span><span class="nx">aThing</span><span class="p">);</span>    
<span class="p">}</span>    
</code></pre></div></div>

<p>A naïve developer, like myself, would assume that our guarding <em>if(truthy)</em> would apply the <a href="http://bonsaiden.github.com/JavaScript-Garden/#types.equality">loose, truthy type coercions we have been trained to avoid</a>; and an undisciplined tester, like myself from a few moments ago, might almost be forgiven for missing the lawn for the dandelion. The following assertions execute as expected naïvely:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">//Strings:    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="dl">'</span><span class="s1">aThing</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//We verbed    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="dl">''</span><span class="p">);</span> <span class="c1">//Verb, we did not    </span>
    
<span class="c1">//Numbers:    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">//We verbed    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="kc">NaN</span><span class="p">);</span> <span class="c1">//Verb, we did not    </span>
    
<span class="c1">//Booleans:    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="kc">true</span><span class="p">);</span> <span class="c1">//We verbed    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span> <span class="c1">//Verb, we did not    </span>
    
<span class="c1">//Null and undefined:    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span> <span class="c1">//Verb, we did not    </span>
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="kc">undefined</span><span class="p">);</span> <span class="c1">//Verb, we did not    </span>
</code></pre></div></div>

<p>But if the republic of we would but pause and stare but briefly into the abyss, it becomes immediately apparent that loose, truthy typely coerced evaluation is not happening here.</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="dl">'</span><span class="s1">a string of some sort</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//We verbed    </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="kc">true</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">a string of some sort</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">'true' != 'a string of some sort'</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//Assertion fails    </span>
    
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span> <span class="c1">//We verbed    </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="kc">true</span> <span class="o">==</span> <span class="mi">5</span><span class="p">,</span> <span class="dl">"</span><span class="s2">'true' != 5</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//Assertion fails    </span>
    
<span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//We verbed    </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">(</span><span class="kc">true</span> <span class="o">==</span> <span class="dl">'</span><span class="s1">0</span><span class="dl">'</span><span class="p">,</span> <span class="dl">"</span><span class="s2">'true' != '0'</span><span class="dl">"</span><span class="p">);</span> <span class="c1">//Assertion fails    </span>
</code></pre></div></div>

<p>To my mind, this is irrational, unsettling and in possible violation of the laws of gravity; yet, it had never occurred to me that an <em>if(‘gimme shelter’)</em> statement would ever not be met as truthy. In fact, my mind was so far out of touch with the rules of the matrix, that I spent a few fevered seconds struggling with this paradox:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">doVerbOnNoun</span><span class="p">({});</span> <span class="c1">//We verbed    </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">({}</span> <span class="o">==</span> <span class="kc">true</span><span class="p">,</span> <span class="dl">'</span><span class="s1">{} != true</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//Assertion fails    </span>
<span class="nx">console</span><span class="p">.</span><span class="nx">assert</span><span class="p">({}</span> <span class="o">==</span> <span class="kc">false</span><span class="p">,</span> <span class="dl">'</span><span class="s1">{} != false</span><span class="dl">'</span><span class="p">);</span> <span class="c1">//Assertion fails    </span>
</code></pre></div></div>

<p>Clearly, loose truthy evaluation is not part of the algorithm of the single parameter if() statement. The multinational we can exercise some futility by instrumenting doVerbOnNoun with some diagnostics:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">function</span> <span class="nx">doVerbOnNoun</span><span class="p">(</span><span class="nx">aThing</span><span class="p">)</span> <span class="p">{</span>    
  <span class="nx">console</span><span class="p">.</span><span class="nx">group</span><span class="p">(</span><span class="nx">aThing</span><span class="p">);</span>    
    
  <span class="k">if</span> <span class="p">(</span><span class="nx">aThing</span><span class="p">)</span> <span class="p">{</span>    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Verbing on </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span><span class="p">);</span>    
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>    
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Not verbing on </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span><span class="p">);</span>    
  <span class="p">}</span>    
    
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="o">!</span><span class="nx">aThing</span><span class="p">,</span> <span class="dl">'</span><span class="s1">evaluating (!</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">)</span><span class="dl">'</span><span class="p">);</span>    
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="kc">false</span> <span class="o">!=</span> <span class="nx">aThing</span><span class="p">,</span> <span class="dl">'</span><span class="s1">evaluating (</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> != false)</span><span class="dl">'</span><span class="p">);</span>    
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="kc">false</span> <span class="o">!=</span> <span class="p">(</span><span class="kc">false</span> <span class="o">==</span> <span class="nx">aThing</span><span class="p">),</span> <span class="dl">'</span><span class="s1">evaluating (false != (false == </span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span> <span class="o">+</span> <span class="dl">'</span><span class="s1">)</span><span class="dl">'</span><span class="p">);</span>    
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="kc">true</span> <span class="o">==</span> <span class="nx">aThing</span><span class="p">,</span> <span class="dl">'</span><span class="s1">evaluating (</span><span class="dl">'</span> <span class="o">+</span> <span class="nx">aThing</span> <span class="o">+</span> <span class="dl">'</span><span class="s1"> == true)</span><span class="dl">'</span><span class="p">);</span>    
    
  <span class="nx">console</span><span class="p">.</span><span class="nx">groupEnd</span><span class="p">(</span><span class="nx">aThing</span><span class="p">);</span>    
<span class="p">}</span>    
</code></pre></div></div>

<p>But none of the assertions align with the evaluation of the <em>if()</em> statement 100% of the time. So what is actually happening? Pure, unbiased, unmitigated, unabashed madness–that’s what. <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-12.5">Section 12.5 of the ECMAScript specification</a> defines the if() statement as:</p>

<blockquote>
  <p>“The production IfStatement : if ( Expression ) Statement is evaluated as follows:  <br>
Let exprRef be the result of evaluating Expression.  <br>
If <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-9.2">ToBoolean</a>(GetValue(exprRef)) is false, return (normal, empty, empty).  <br>
Return the result of evaluating Statement.”</p>
</blockquote>

<p>What of <a href="http://www.ecma-international.org/ecma-262/5.1/#sec-9.2">ToBoolean</a>, you ask (jaws clenched in fear, rage and agony)? It is sufficiently (albeit imperfectly) expressed as:</p>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">ToBoolean</span> <span class="o">=</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">val</span><span class="p">)</span> <span class="p">{</span>    
  <span class="k">return</span> <span class="p">(</span>    
    <span class="nx">val</span> <span class="o">!==</span> <span class="kc">false</span> <span class="o">&amp;&amp;</span>    
    <span class="nx">val</span> <span class="o">!==</span> <span class="mi">0</span> <span class="o">&amp;&amp;</span>    
    <span class="nx">val</span> <span class="o">!==</span> <span class="dl">''</span> <span class="o">&amp;&amp;</span>    
    <span class="nx">val</span> <span class="o">!==</span> <span class="kc">null</span> <span class="o">&amp;&amp;</span>    
    <span class="nx">val</span> <span class="o">!==</span> <span class="kc">undefined</span> <span class="o">&amp;&amp;</span>    
    <span class="p">(</span><span class="k">typeof</span> <span class="nx">val</span> <span class="o">!==</span> <span class="dl">'</span><span class="s1">number</span><span class="dl">'</span> <span class="o">||</span> <span class="o">!</span><span class="nb">isNaN</span><span class="p">(</span><span class="nx">val</span><span class="p">))</span>    
  <span class="p">);</span>    
<span class="p">};</span>    
</code></pre></div></div>

<p>At least to the existential “us”, this revelation is almost laughably ironic. The if() statement isn’t loose or truthy and doesn’t coerce type whatsoever, rather it simply casts whatever it is offered ToBoolean().</p>

<p>So ends this rather unsatisfying diversion into JavaScript. Please don’t let this sully your feelings on the language. Restore your faith and go watch <a href="http://plus.google.com/118095276221607585885">+Douglas Crockford</a>’s <a href="http://www.youtube.com/watch?v=dkZFtimgAcM">latest, most excellent talk on Monads and Gonads</a>. It’s worth every minute of your time.</p>

  </div><!-- from https://github.com/utterance/utterances -->
<script src="https://utteranc.es/client.js"
        repo="crfroehlich/cellar"
        issue-term="title"
        label="blogpost-comment"
        theme="github-light"
        crossorigin="anonymous"
        async>
</script><a class="u-url" href="/code/2013/01/03/java-script-aka-marlboro-country.html" hidden></a>
</article>
</p>
          </section>

          <!-- Footer -->
            <footer>
              <ul class="actions">
                <li><a href="https://luddites.me/" class="button">Home</a></li>
                <li><a href="https://luddites.me/blog/" class="button">Blog</a></li>
              </ul>
            </footer>
          </div>

        <!-- Footer -->
        <!-- Copyright -->
<div id="copyright">
  <ul>
    <li>
      <a href="https://github.com/crfroehlich" class="icon fa-github" rel="nofollow"><span class="label">GitHub</span></a> |
      <a href="https://twitter.com/tquestingbeast" class="icon fa-twitter" rel="nofollow"><span class="label">Twitter</span></a> |
      <a href="https://orcid.org/0000-0001-6652-5940" class="ai ai-orcid" rel="nofollow"><span class="label">ORCID</span></a> |
      <a href="https://scholar.google.es/citations?user=j3---DAAAAAJ" class="ai ai-google-scholar" rel="nofollow"><span class="label">Google Scholar</span></a> |
      
      <a href="/atom.xml" title="Atom Feed" class="icon fa-rss" rel="nofollow">
        <span class="label">Subscribe</span>
      </a>
      
    </li>
    <li>Powered by <a href="https://fastpages.fast.ai/">fastpages</a></li>
    <li>Design by <a href="https://html5up.net" rel="nofollow">HTML5 UP</a> &
      <a href="https://github.com/mmistakes/jekyll-theme-basically-basic">Basically Basic</a></li>
    <li>Jekyll Integration by <a href="https://jekyllup.com/">JekyllUp</a> </li>
    <li>Please take generously</li>
  </ul>
</div>


      </div>

    <!-- Scripts -->
    <!-- DYN -->
<script src="https://luddites.me/assets/js/jquery.min.js"></script>
<script src="https://luddites.me/assets/js/jquery.scrollex.min.js"></script>
<script src="https://luddites.me/assets/js/jquery.scrolly.min.js"></script>
<script src="https://luddites.me/assets/js/skel.min.js"></script>
<script src="https://luddites.me/assets/js/util.js"></script>
<script src="https://luddites.me/assets/js/main.js"></script>


  </body>
</html>
